<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.toyo.vc.dao.KoujiMapper">

    <select id="findByUserId" parameterType="String" resultType="Kouji">
        select * from kouji
        <where>
            <if test="value!=null">
                responsibility = #{userid}
            </if>
        </where>
    </select>

    <select id="findLastedTenKoujiByResponsibility" parameterType="String" resultType="Kouji">
        select * from kouji
        <where>
            <if test="value!=null">
                responsibility=#{userid}
            </if>
        </where>
        ORDER BY bgnYmd DESC limit 10
    </select>

    <select id="findUpdateTenKoujiByResponsibility" parameterType="String" resultType="Kouji">
        select * from kouji
        <where>
            <if test="value!=null">
                responsibility=#{userid}
            </if>
        </where>
        ORDER BY updDate DESC limit 10
    </select>

    <insert id="insertKouji" parameterType="Kouji">
        insert into
        kouji(kjNo, kjMeisyo,kjKbn,bgnYmd,endYmd,nextYmd,nendo,syukan,gyosyaRyakuA,location,status,responsibility, trkDate, updDate)
        values(
        #{kjNo},
        #{kjMeisyo},
        #{kjKbn},
        #{bgnYmd},
        #{endYmd},
        #{nextYmd},
        #{nendo},
        #{syukan},
        #{gyosyaRyakuA},
        #{location},
        #{status},
        #{responsibility},
        #{trkDate},
        #{updDate}
        )
    </insert>

    <update id="updateKouji" parameterType="Kouji">
        update kouji
        set kjNo = #{kjNo},
        kjMeisyo = #{kjMeisyo},
        kjKbn = #{kjKbn},
        bgnYmd = #{bgnYmd},
        endYmd = #{endYmd},
        nextYmd = #{nextYmd},
        nendo = #{nendo},
        syukan = #{syukan},
        gyosyaRyakuA = #{gyosyaRyakuA},
        location = #{location},
        status = #{status},
        responsibility = #{responsibility},
        updDate = #{updDate}
        where id = #{id}
    </update>

    <delete id="deleteKouji" parameterType="Kouji" >
        DELETE
        FROM kouji
        WHERE id=#{id}
    </delete>

    <select id="getLastInsertId" resultType="int">
        select id from kouji ORDER BY id DESC limit 1
    </select>

</mapper>